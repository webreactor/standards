Минимальный навык работы с гит
==============================

Нормальный порядок работы с гитом такой:

* Хотим изменить что-то в проекте
* Делаем бранч в веб интерфейсе гита, делаем пул реквест на бранч. *Бранч это копия всех файлов проекта*
* Получаем бранч себе `git pull` 
* Переключаемся у себя на новый бранч `git chekcout branch_name`
* Делаем изменения
* Проверяем изменения - `git status` и `git diff`
* Выбираем файлы для коммита - `git add file_name` или папку `git add path_name` можно использвоать маску `*`
* Создаем коммит - `git commit -m "краткое обьснение изменений"`
* Пушим изменения на ссервер - `git push`
* Если кто-то запушил изменения до вас в этот же бранч - то пушнуть не получиться, а надо будет сделать `git pull`, исправить конфликты есть есть и потом уже пушить.
* Уведомляем старшего коллегу, что пулреквест готов к проверке.
* Знающий, что он делает, человек мержит ваш бранч в мастер.

Бранч можно создать и локально и потом пушнуть его на сервер и потом создать пулреквест.
Но чем раньше вы создадите пулреквест, тем лучше.

## Клонирование репозитория

Передача файлов по http протоколу

`git clone https://github.com/webreactor/standards.git`

Передача файлов по ssh протоколу

`git clone git@github.com:webreactor/standards.git`

Команда создает папку `standards` и клонирует в нее репозиторий

В конец можно добавить путь куда склонировать, но папка должна быть пустая

## Получение обновления

`git pull` 

Может вызвать конфликты если у вас есть локальные изменения в строках которые обновились удаленно.

См. разрешение конфликтов

## Работа с бранчами

Бранч это копия всех файлов проекта

* `git checkout branch_name` - переключиться на существующий бранч
* `git checkout -b branch_name` - создать новый бранч и переключиться на него
* `git checkout file_name` - восстановить файл если изменили и не коммитили
* `git checkout path_name` - восстановить папку и все ее содержимое

## Узнать текущее состояние локального репозитория

* `git status` - какие файл изменились, какой текущий бранч
* `git diff` - посмотрели содержимое изменения
* `git diff --cached` - изменения которые уйдут в коммит 

## Работа с бранчами

* `git branch` - список локальных бранчей
* `git branch -r` - список бранчей на сервере
* `git checkout branch_name` - переключиться на существующий бранч
* `git checkout -b branch_name` - создать новый бранч и переключиться на него
* `git checkout file_name` - восстановить файл если изменили и не коммитили
* `git checkout path_name` - восстановить папку и все ее содержимое

## Мерж бранчей

`git merge master` - замержить мастер в ваш бранч

Внимание проверьте сначала ваш текущий бранч `git status`

Потомучто направление мерж влияет на резульат.

После мержа вам надо будет разрешить конфликты если они были
Закоммитить и запушить результат.






## Как сделать пул реквест

Пулреквест это заявка на мерж двух бранчей.

Пурвервест создается через вебинтерфейс.

* Бранч котоырй вы отите замержитьдолжен быть запушен на сервер
* В вебинтерфейсе переключаетесь на ваш бранч - слева сверху выпадающее меню Branch. (там же их можно добавлять)
* После переключения появится кнопка New pull request. нажимает
* Даем комментарий при необходимости, сохраняем.

## Если сделали изменения с Мастере но не коммитили их, и хотите сделать новый бранч

сделали исзнения с мастере

* `git checkout -b brranch_name` - изменения перенеслись в бранч
* `git status` - посмотрели какие файл изменились
* `git diff` - посмотрели содержимое изменения
* `git add .` -добавили все или только нуждные файлы в коммит
* `git commit -m "обьяснение"`  - закоммимлили их
* `git push` -  отпраавли изменения на сервер
* сделали пулреквест

## Разрешение конфликтов

Обычно это выводит списмок файлов в котрых есть конфликты.
*Каждый* файл надо открыть ви в нем будет две версии в месте где конфликт - ваша и удаленная - вам надо выбрать нужную.
После этого делается новый коммит.

Если не знаете что делать, если это слишком сложно, сделапйте новый клон репозитория, переключитесь на нужный бранч и пренести смвои файлу туда из копии.

## Типичный порядок работы с коммитом

Представим вы в нужном бранче и есть изменения которые мы хотим закоммитить

1 `git status` - узнаем какие файлы изменились

2 проверяем изменения
Если новые файлы не добавлялись
`git diff` // смотрим что конкретно поменялось - что бы не коммитить лишнее и не то что хотели.
бывает случайно добавляем какие-то новые строки пробелы сами того не желая
удаляем все лишнее
проверяем `git diff` опять

Если добавлялись новые файлы status покажет их
но что бы увидеть изменения надо сделать
`git add .`   -  делается только если статус не показал неожижаных файлов
если изменились файлы которые мы не хотим коммитить добвялем хорошие отдельно-  `git add file_mask*`
либо добавляет сначала все `git add .` (или `git add -A` если были удаления)
затем удаляем из коммита нежелательные `git reset file_mask*`

Удаляем все лишнее

3 проверяем последний раз что конкретно идет в коммит
`git status` - зеленые идут в коммит
`git diff --cached` - покажет изменения в готовых к коммиту файлов (зеленых)

4 делаем сам коммит
`git commit -m "description"`

5 пушим коммит на сервер 
`git push`

Итого, последовательность команд обычно такая:

```bash
git status
git add -A
git reset file_mask* # удаляем не нужное
git diff --cached # проверяем что именно идет в коммит
#правим файлы если было что-то лишнее
git add на правленые файлы
git status 
git diff --cached # проверяем результат
git commit -m "description"
git push #коммит сделан
```

Естественно с опытом команды в середине будешь пропускать некоторые когда хорошо уже будешь чувствовать что идет в коммит.
но хотябы один раз status и diff делается почти всегда






