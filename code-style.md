## Стандарты кодирования

Данный стандарт основан на стандарте [PSR-1](http://www.php-fig.org/psr/psr-1/).
дополняя его дополнительными правилами.

### Файлы

- Файлы должны быть в UTF-8 кодировке без BOM.
- Окончания строк - юниксовые (LF)
- Последняя строка в файле ставится пустой (не должна содержать кода)
- Каждый класс должен быть в своем файле. Один файл - один класс.
- Мы используем стандарт автозагрузки PSR-4. Тоесть структупа имен папок и файлов, точно повторяет структуру неймспейсов и имен классов, включая регистр букв.
- php файлы начинаются на `<?php`. Закрывающий рнр тег в конце файла не используется.
- В шаблонных рнр файлах допустимо использовать короткий echo - `<?= ?>`.

### Имена

**Классы и неймспейсы**

Именования классов и неймспейсов должны следовать формату [PSR-4](http://www.php-fig.org/psr/psr-4/).

Слова с большой буквы, без подчеркивания.

`class CamelCase extends Base`

`namespace Vendor\System\SubSystem;`

**Методы и функции**

С маленькой буквы, последующие слова с большой, без подчеркивания.
Стараться в следующем порядке - глаголПрилагательноеСушествительное.

`get(), getUser()`

Множественное число обязательно показывается, множественной формой

`getDeletedUsers()`

Если рекурсивный метод разделен на два (инициатор и собственно рекурсивная часть), то они именуются одинакого, рекурсивная часть начинается с нижнего подчеркивания.

`printTree(), _printTree()`

**Свойства класса и переменные**

Все в нижнем регистре, с подчеркиванием.
Множественное число обязательно показывается, множественной формой.

`$deleted_users`

Если рядом нескольких похожих по смыслу переменных, но отличающихся типом, используйте постфикс с типом.

`$snake_case, $catalog, $_important_var`

`$catalog_json` - строка

`$catalog_data` - массив

`$catalog_obj` - обьект


### Пробелы и Indent style

- Открывающая фигурная скобка ставится в окончании строки.

```php
class Test {
    function test() {
        if (DEV_ENV) {
    	    echo 1;
        }
    }
}
```
- Однострочные блоки оформляются фигурными скобками в любом случае.

```php
if (DEV_ENV) {
    echo 1;
}
```


- Табуляция делается через 4 проблела вместо TAB символа. Не забудьте настроить свои редакторы.
- Открывающая скобка у функций и метобов ставится без пробела

```php
time();
isset();
```

*`isset()` и т.д. на техническом уровне являются конструкциями языка, однако импользуются, как функции, и оформляются сооветвенно так же.*

- Открывающая скобка с управляющими контрукциями языка ставится с пробелом.

```php
if ()
foreach ()
for ()
switch ()
```

- Внутренности многострочного выражения отбиваются на один один уровень
- закрывающая скобка выражения на несколько строк ставится на уровне на котором открывалась первая строка

```php
$data = array(
    "level1-1" => "name1",
    "level1-2" => "name2",
    "level1-3" => array(
        "level2-1" => "name21",
        "level2-2" => "name23",
        "level2-3" => "name24",
    )
);
```

- В выражениях операнды отделяются проблелами, кроме операции конкатенация. В случае конкатенации сробел ставится если это улучшает читаемость.

```php
function promptUser($var = 'default');
$a = 1 + (1 + 2) + time();
$s = "test $a";
$s = 'test '.$a;
```

- Перечисление параметров, пробле ставится после запятой, как и в обычном тексте.

```php
runTest(1, 23, "Message");
```

### Пример

```php
<?php

namespace Vendor\System\SubSystem;

class Catalog extends BaseCatalog {

	protected $size;
    protected $time_created;
    protected $tree;
    
    public function __construct($size) {
    	$this->size = $size;
        $this->time_created = time();
        $this->init();
    }
    
    public function init() {
    	$data = array(
			"level1-1" => "name1",
            "level1-2" => "name2",
            "level1-3" => array(
            	"level2-1" => "name21",
                "level2-2" => "name23",
                "level2-3" => "name24",
            ),
            "settings" => array(
            	array("arg1" => 123),
            	array("arg2" => 124),
            	array("arg3" => 125),
            )
        );
        $this->tree = $data;
    }
    
    public function getTree() {
    	return $this->tree;
    }
    
	public function printTree($b = 1) {
    	$a = $b + 2;
        $s = "test $a";
        $s = 'test '.$a;
        $s = "Some test\n".
        	"Another line\n".
            "Another line\n";
    	if ($var == 1) {
        	echo time();
        }
        
    	foreach ($this->tree as $key => $value) {
        	echo $value;
        }
        
        for ($i = 0; $i < 10; $i++) {
        	echo $i."34";
        }
        
    }
    
}


```

